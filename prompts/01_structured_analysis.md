# 結構化分析方法

## 目標
將複雜需求文件透過迭代式閱讀，逐步提取概念並建立結構化的知識樹。

## 分析步驟

### Step 1: 需求文件預處理
1. 將完整需求文件展示
2. 為每個段落/句子標記閱讀順序（①②③④⑤...）
3. 確認分析目標：提取「名詞」和「動詞」並建立 **主詞 → 動詞 → 受詞** 結構

### Step 2: 迭代式概念提取
對每次迭代執行以下步驟：

#### 2.1 標示閱讀進度
使用以下格式標示當前閱讀狀態：
```
✅① 已讀段落內容
✅② 已讀段落內容  
⬜③ 未讀段落內容
⬜④ 未讀段落內容
```

#### 2.2 概念提取
從當前閱讀段落中提取：
- **名詞**：實體、對象、概念
- **動詞**：動作、行為、狀態變化

#### 2.3 建立語義完整的樹結構
遵循以下規則：
- **動詞規則**：動詞不能獨立存在，必須建立完整的主謂賓結構
  - **主動式**：`主詞 → 動詞 → 受詞`
  - **被動式**：`受詞 ← 動詞 ← 主詞`
- **名詞規則**：名詞不能獨立存在，必須找到相關的動作關係結合
- **新增原則**：新概念如果不符合既有樹結構，就另外建立新樹，不要修改既有結構

#### 2.4 使用 Tree 格式呈現
使用 Linux tree 指令格式展示結構，箭頭方向表示動作方向：

**主動式結構**：
```
主詞
└── 動作 →
    └── 受詞
```

**被動式結構**：
```
受詞
└── 動作 ←
    └── 主詞
```

**範例**：
```
小美
└── 參與 →
    └── 遊戲

遊戲
└── 被參與 ←
    └── 小美
```

### Step 3: 迭代執行
重複 Step 2 直到所有標記段落都被閱讀完成。

### Step 4: 概念合併
完成所有迭代後，進行兩種類型的概念合併：

#### 4.1 相同概念合併
找出不同樹中完全相同的概念節點（名詞），例如：
- 樹A中的「名字」和樹B中的「名字」

#### 4.2 具體與抽象概念合併
識別具體概念與其抽象表達的對應關係，例如：
- 「四個人」= 「小美、小明、小華、小王」
- 「每個人」= 「小美、小明、小華、小王」（在此語境下）

#### 4.3 合併規則
- 保留所有相關的動作關係
- **抽象概念作為節點標籤**：用抽象概念標示節點，括號內註明對應的具體概念
- 相同概念的多個關係整合到同一結構中

#### 4.4 合併範例

**合併前**：
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王

四個人
└── 命名 →
    └── 名字
        └── 組成 →
            ├── 姓
            └── 名

每個人
└── 抽牌 →
    └── 牌堆
```

**合併後**：
```
大老二遊戲
└── 被參與 ←
    └── 四個人（小美、小明、小華、小王）
        ├── 命名 →
        │   └── 名字
        │       └── 組成 →
        │           ├── 姓
        │           └── 名
        └── 抽牌 →（每個人）
            └── 牌堆
```

## 輸出格式

### 完整輸出要求
**必須保留每個階段的完整結果**，便於使用者檢視和調整：

#### 階段一：迭代分析結果
```
### 迭代 N：閱讀第 N 個段落
**閱讀狀態**：
[標示已讀✅和未讀⬜段落]

**新增概念**：
- 名詞：[列出新發現的名詞]
- 動詞：[列出新發現的動詞]

**結構樹（迭代N）**：
[使用tree格式展示所有概念樹，包含既有的和新增的]
```

#### 階段二：合併前的完整概念森林
```
## 合併前的最終結構樹
[展示所有迭代完成後，尚未合併的完整樹結構]
```

#### 階段三：概念合併分析
```
## 概念合併分析
### 識別的合併項目：
- 相同概念：[列出相同的概念節點]
- 抽象對應：[列出抽象概念與具體概念的對應關係]

### 合併過程：
[逐步展示合併邏輯和決策]
```

#### 階段四：最終合併結果
```
## 最終合併結構樹
[展示合併後的完整結構]
```

## 核心規則
1. **順序性**：嚴格按照標記順序閱讀，一次只讀一個段落
2. **完整性**：每個動詞必須有主詞和受詞，支援主動式和被動式
3. **關聯性**：每個名詞必須在動作關係中存在
4. **獨立性**：新概念不符合既有結構時，建立新樹
5. **累積性**：每次迭代顯示完整的概念森林（所有樹）
6. **不重組**：迭代過程中不修改既有樹的結構，只新增
7. **語態識別**：根據句子語態選擇適當的箭頭方向
   - 主動：`→` （動作由左向右）
   - 被動：`←` （動作由右向左）
8. **最終合併**：所有迭代完成後，合併相同概念節點的樹
9. **階段保留**：**必須保留每個處理階段的完整結果**，包括：
   - 每次迭代的結果
   - 合併前的完整結構
   - 合併分析過程
   - 最終合併結果

---

## 完整範例

### 範例需求文件
```
① 小美、小明、小華、小王正在參與這場大老二遊戲
② 大老二開始之後，③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
④ 接著每個人都會在牌堆中抽牌。
⑤ 玩家又分成 AI 或人類玩家兩種。
```

### 迭代分析範例

#### 迭代 1：閱讀第 ① 段落
**閱讀狀態**：
```
✅① 小美、小明、小華、小王正在參與這場大老二遊戲
⬜② 大老二開始之後，③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
⬜④ 接著每個人都會在牌堆中抽牌。
⬜⑤ 玩家又分成 AI 或人類玩家兩種。
```

**新增概念**：
- 名詞：小美、小明、小華、小王、大老二遊戲
- 動詞：參與

**結構樹（迭代1）**：
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王
```

#### 迭代 2：閱讀第 ② 段落
**閱讀狀態**：
```
✅① 小美、小明、小華、小王正在參與這場大老二遊戲
✅② 大老二開始之後，⬜③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
⬜④ 接著每個人都會在牌堆中抽牌。
⬜⑤ 玩家又分成 AI 或人類玩家兩種。
```

**新增概念**：
- 動詞：開始

**結構樹（迭代2）**：
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王

大老二遊戲
└── 開始 →
```

#### 迭代 3：閱讀第 ③ 段落
**閱讀狀態**：
```
✅① 小美、小明、小華、小王正在參與這場大老二遊戲
✅② 大老二開始之後，✅③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
⬜④ 接著每個人都會在牌堆中抽牌。
⬜⑤ 玩家又分成 AI 或人類玩家兩種。
```

**新增概念**：
- 名詞：名字、姓、名、四個人
- 動詞：命名、組成

**結構樹（迭代3）**：
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王

大老二遊戲
└── 開始 →

名字
└── 組成 →
    ├── 姓
    └── 名

四個人
└── 命名 →
    └── 名字
```

#### 迭代 4：閱讀第 ④ 段落
**閱讀狀態**：
```
✅① 小美、小明、小華、小王正在參與這場大老二遊戲
✅② 大老二開始之後，✅③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
✅④ 接著每個人都會在牌堆中抽牌。
⬜⑤ 玩家又分成 AI 或人類玩家兩種。
```

**新增概念**：
- 名詞：每個人、牌堆
- 動詞：抽牌

**結構樹（迭代4）**：
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王

大老二遊戲
└── 開始 →

名字
└── 組成 →
    ├── 姓
    └── 名

四個人
└── 命名 →
    └── 名字

每個人
└── 抽牌 →
    └── 牌堆
```

#### 迭代 5：閱讀第 ⑤ 段落
**閱讀狀態**：
```
✅① 小美、小明、小華、小王正在參與這場大老二遊戲
✅② 大老二開始之後，✅③ 首先這四個人都要先給自己命名（名字有「姓」和「名」兩部分）
✅④ 接著每個人都會在牌堆中抽牌。
✅⑤ 玩家又分成 AI 或人類玩家兩種。
```

**新增概念**：
- 名詞：玩家、AI玩家、人類玩家
- 動詞：分成

### 合併前的最終結構樹
```
大老二遊戲
└── 被參與 ←
    ├── 小美
    ├── 小明
    ├── 小華
    └── 小王

大老二遊戲
└── 開始 →

名字
└── 組成 →
    ├── 姓
    └── 名

四個人
└── 命名 →
    └── 名字

每個人
└── 抽牌 →
    └── 牌堆

玩家
└── 分成 →
    ├── AI玩家
    └── 人類玩家
```

### 概念合併分析
**識別的合併項目**：
- 相同概念：「名字」節點出現在兩處
- 抽象對應：
  - 「四個人」= 小美、小明、小華、小王
  - 「每個人」= 小美、小明、小華、小王

**合併過程**：
1. 「四個人」和「每個人」都對應到具體的四個玩家
2. 「名字」概念在「命名」和「組成」動作之間建立連接
3. 使用抽象概念作為節點標籤，括號內註明具體對應

**最終合併結構樹**：
```
大老二遊戲
├── 被參與 ←
│   └── 四個人（小美、小明、小華、小王）
│       ├── 命名 →
│       │   └── 名字
│       │       └── 組成 →
│       │           ├── 姓
│       │           └── 名
│       └── 抽牌 →（每個人）
│           └── 牌堆
└── 開始 →

玩家
└── 分成 →
    ├── AI玩家
    └── 人類玩家
```

### 概念合併分析
- 「四個人」保留為節點標籤，括號內說明具體對應
- 「每個人」在抽牌動作後標註，顯示這個動作的原始來源表述
- 保持概念來源的可追溯性，同時明確具體對應關係
- 「玩家」的分類概念保持獨立，因為它是分類而非具體指向

---

## 使用說明
將待分析的需求文件貼入，AI 將按照此方法進行迭代式結構化分析，最終產出完整的概念知識樹結構。

---

**請將您的需求文件貼入，我將使用上述方法進行結構化分析。**